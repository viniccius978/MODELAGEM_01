<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_0w6ttog" targetNamespace="http://bpmn.io/schema/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="18.6.1">
  <bpmn:collaboration id="Collaboration_1geioqi">
    <bpmn:participant id="Participant_0jbqrki" name="Usuário" processRef="Process_0x6yf66" />
    <bpmn:participant id="Participant_0fcy3bt" name="Sistema" processRef="Process_0h35sqz" />
    <bpmn:participant id="Participant_16mgnj3" name="Banco de dados" processRef="Process_1ernmdg" />
    <bpmn:messageFlow id="Flow_0skztoe" sourceRef="Activity_0fgthgh" targetRef="Event_0o43yt7" />
    <bpmn:messageFlow id="Flow_16vq708" sourceRef="Event_19wyyqx" targetRef="Activity_0fzjz1c" />
    <bpmn:messageFlow id="Flow_0ecz3xw" sourceRef="Event_1esu2d7" targetRef="Activity_12zdyl3" />
  </bpmn:collaboration>
  <bpmn:process id="Process_0x6yf66" isExecutable="false">
    <bpmn:startEvent id="Event_0o43yt7" name="Solicitação por QR Code" />
    <bpmn:startEvent id="Event_0bqx5gr" name="Solicitação de transferência">
      <bpmn:outgoing>Flow_0mu69ww</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="Activity_0wv2oj4" name="Informa valor">
      <bpmn:incoming>Flow_0mu69ww</bpmn:incoming>
      <bpmn:outgoing>Flow_0upp6fj</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_0mu69ww" sourceRef="Event_0bqx5gr" targetRef="Activity_0wv2oj4" />
    <bpmn:sequenceFlow id="Flow_0upp6fj" sourceRef="Activity_0wv2oj4" targetRef="Gateway_0g5ga2s" />
    <bpmn:exclusiveGateway id="Gateway_0g5ga2s" name="Confirmação">
      <bpmn:incoming>Flow_0upp6fj</bpmn:incoming>
      <bpmn:outgoing>Flow_1fjfalg</bpmn:outgoing>
      <bpmn:outgoing>Flow_0wluqvn</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="Event_0e069wy" name="cancela">
      <bpmn:incoming>Flow_1fjfalg</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1fjfalg" name="Não" sourceRef="Gateway_0g5ga2s" targetRef="Event_0e069wy" />
    <bpmn:sequenceFlow id="Flow_0wluqvn" name="Sim" sourceRef="Gateway_0g5ga2s" targetRef="Event_19wyyqx" />
    <bpmn:endEvent id="Event_19wyyqx" name="Verificar saldo">
      <bpmn:incoming>Flow_0wluqvn</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:task id="Activity_12zdyl3" name="informa usuário sobre cancelamento (saldo insuficiente)" />
  </bpmn:process>
  <bpmn:process id="Process_0h35sqz">
    <bpmn:task id="Activity_0fgthgh" name="API Asaas gera QR code">
      <bpmn:outgoing>Flow_1uj5ih3</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_1uj5ih3" sourceRef="Activity_0fgthgh" targetRef="Activity_1gt5dyg" />
    <bpmn:sequenceFlow id="Flow_102sxbo" sourceRef="Activity_1gt5dyg" targetRef="Activity_0oyseem" />
    <bpmn:task id="Activity_1gt5dyg" name="Aguardar notificação de pagamento (webhook">
      <bpmn:incoming>Flow_1uj5ih3</bpmn:incoming>
      <bpmn:outgoing>Flow_102sxbo</bpmn:outgoing>
      <bpmn:outgoing>Flow_0i4njgo</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Activity_0oyseem" name="Atualizar banco de dados">
      <bpmn:incoming>Flow_102sxbo</bpmn:incoming>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_076ja7q">
        <bpmn:targetRef>DataStoreReference_0g220lt</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:task>
    <bpmn:task id="Activity_0fzjz1c" name="Consultar banco de dados">
      <bpmn:outgoing>Flow_1edj8ft</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0co6rff">
        <bpmn:targetRef>DataStoreReference_0g220lt</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_1edj8ft" sourceRef="Activity_0fzjz1c" targetRef="Gateway_0qy2c2d" />
    <bpmn:sequenceFlow id="Flow_08199s9" name="Sim" sourceRef="Gateway_0qy2c2d" targetRef="Activity_08kx80j" />
    <bpmn:sequenceFlow id="Flow_1ymssc2" name="Não" sourceRef="Gateway_0qy2c2d" targetRef="Event_1esu2d7" />
    <bpmn:endEvent id="Event_1esu2d7" name="Cancela">
      <bpmn:incoming>Flow_1ymssc2</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:task id="Activity_08kx80j" name="Calcular retenção de 7%">
      <bpmn:incoming>Flow_08199s9</bpmn:incoming>
      <bpmn:outgoing>Flow_0fslzcs</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_0fslzcs" sourceRef="Activity_08kx80j" targetRef="Activity_1195ko1" />
    <bpmn:task id="Activity_1195ko1" name="Chama webhook">
      <bpmn:incoming>Flow_0fslzcs</bpmn:incoming>
      <bpmn:outgoing>Flow_1xezkvt</bpmn:outgoing>
      <bpmn:outgoing>Flow_1gw8l8b</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_1xezkvt" sourceRef="Activity_1195ko1" targetRef="Event_0qxmho5" />
    <bpmn:sequenceFlow id="Flow_1gw8l8b" sourceRef="Activity_1195ko1" targetRef="Activity_1fkuhyk" />
    <bpmn:sequenceFlow id="Flow_0i4njgo" sourceRef="Activity_1gt5dyg" targetRef="Event_0bhnnew" />
    <bpmn:endEvent id="Event_0bhnnew" name="Realiza pagamento">
      <bpmn:incoming>Flow_0i4njgo</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:task id="Activity_1fkuhyk" name="Registrar no banco de dados">
      <bpmn:incoming>Flow_1gw8l8b</bpmn:incoming>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1ibhs4m">
        <bpmn:targetRef>DataStoreReference_0g220lt</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:task>
    <bpmn:endEvent id="Event_0qxmho5" name="Realiza a transferência">
      <bpmn:incoming>Flow_1xezkvt</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:exclusiveGateway id="Gateway_0qy2c2d" name="Saldo suficiente">
      <bpmn:incoming>Flow_1edj8ft</bpmn:incoming>
      <bpmn:outgoing>Flow_08199s9</bpmn:outgoing>
      <bpmn:outgoing>Flow_1ymssc2</bpmn:outgoing>
    </bpmn:exclusiveGateway>
  </bpmn:process>
  <bpmn:process id="Process_1ernmdg">
    <bpmn:dataStoreReference id="DataStoreReference_0g220lt" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1geioqi">
      <bpmndi:BPMNShape id="Participant_0jbqrki_di" bpmnElement="Participant_0jbqrki" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="800" height="290" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0o43yt7_di" bpmnElement="Event_0o43yt7">
        <dc:Bounds x="222" y="112" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="203" y="88" width="74" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0bqx5gr_di" bpmnElement="Event_0bqx5gr">
        <dc:Bounds x="402" y="122" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="385" y="88.5" width="69" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0wv2oj4_di" bpmnElement="Activity_0wv2oj4">
        <dc:Bounds x="490" y="100" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0g5ga2s_di" bpmnElement="Gateway_0g5ga2s" isMarkerVisible="true">
        <dc:Bounds x="515" y="225" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="441.5" y="243" width="63" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0e069wy_di" bpmnElement="Event_0e069wy">
        <dc:Bounds x="622" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="621" y="275" width="38" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_19wyyqx_di" bpmnElement="Event_19wyyqx">
        <dc:Bounds x="462" y="312" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="445" y="288" width="69" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_12zdyl3_di" bpmnElement="Activity_12zdyl3">
        <dc:Bounds x="820" y="260" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0mu69ww_di" bpmnElement="Flow_0mu69ww">
        <di:waypoint x="438" y="140" />
        <di:waypoint x="490" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0upp6fj_di" bpmnElement="Flow_0upp6fj">
        <di:waypoint x="540" y="180" />
        <di:waypoint x="540" y="225" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1fjfalg_di" bpmnElement="Flow_1fjfalg">
        <di:waypoint x="565" y="250" />
        <di:waypoint x="622" y="250" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="583" y="232" width="21" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0wluqvn_di" bpmnElement="Flow_0wluqvn">
        <di:waypoint x="540" y="275" />
        <di:waypoint x="540" y="330" />
        <di:waypoint x="498" y="330" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="546" y="300" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_0fcy3bt_di" bpmnElement="Participant_0fcy3bt" isHorizontal="true">
        <dc:Bounds x="160" y="370" width="800" height="340" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0fgthgh_di" bpmnElement="Activity_0fgthgh">
        <dc:Bounds x="210" y="390" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1gt5dyg_di" bpmnElement="Activity_1gt5dyg">
        <dc:Bounds x="210" y="500" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0oyseem_di" bpmnElement="Activity_0oyseem">
        <dc:Bounds x="320" y="600" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0fzjz1c_di" bpmnElement="Activity_0fzjz1c">
        <dc:Bounds x="450" y="600" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1esu2d7_di" bpmnElement="Event_1esu2d7">
        <dc:Bounds x="632" y="402" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="630" y="445" width="41" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_08kx80j_di" bpmnElement="Activity_08kx80j">
        <dc:Bounds x="640" y="460" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1195ko1_di" bpmnElement="Activity_1195ko1">
        <dc:Bounds x="800" y="460" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0bhnnew_di" bpmnElement="Event_0bhnnew">
        <dc:Bounds x="382" y="522" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="372" y="565" width="56" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1fkuhyk_di" bpmnElement="Activity_1fkuhyk">
        <dc:Bounds x="580" y="600" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0qxmho5_di" bpmnElement="Event_0qxmho5">
        <dc:Bounds x="832" y="602" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="819" y="645" width="63" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0qy2c2d_di" bpmnElement="Gateway_0qy2c2d" isMarkerVisible="true">
        <dc:Bounds x="505" y="475" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="417" y="493" width="78" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1uj5ih3_di" bpmnElement="Flow_1uj5ih3">
        <di:waypoint x="260" y="470" />
        <di:waypoint x="260" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_102sxbo_di" bpmnElement="Flow_102sxbo">
        <di:waypoint x="260" y="580" />
        <di:waypoint x="260" y="640" />
        <di:waypoint x="320" y="640" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1edj8ft_di" bpmnElement="Flow_1edj8ft">
        <di:waypoint x="500" y="600" />
        <di:waypoint x="500" y="563" />
        <di:waypoint x="530" y="563" />
        <di:waypoint x="530" y="525" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08199s9_di" bpmnElement="Flow_08199s9">
        <di:waypoint x="555" y="500" />
        <di:waypoint x="640" y="500" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="604" y="483" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ymssc2_di" bpmnElement="Flow_1ymssc2">
        <di:waypoint x="560" y="500" />
        <di:waypoint x="560" y="420" />
        <di:waypoint x="632" y="420" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="561" y="403" width="21" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fslzcs_di" bpmnElement="Flow_0fslzcs">
        <di:waypoint x="740" y="500" />
        <di:waypoint x="800" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1xezkvt_di" bpmnElement="Flow_1xezkvt">
        <di:waypoint x="850" y="540" />
        <di:waypoint x="850" y="602" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gw8l8b_di" bpmnElement="Flow_1gw8l8b">
        <di:waypoint x="800" y="530" />
        <di:waypoint x="770" y="530" />
        <di:waypoint x="770" y="640" />
        <di:waypoint x="680" y="640" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0i4njgo_di" bpmnElement="Flow_0i4njgo">
        <di:waypoint x="310" y="540" />
        <di:waypoint x="382" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_16mgnj3_di" bpmnElement="Participant_16mgnj3" isHorizontal="true">
        <dc:Bounds x="160" y="710" width="800" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_0g220lt_di" bpmnElement="DataStoreReference_0g220lt">
        <dc:Bounds x="475" y="805" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="DataOutputAssociation_076ja7q_di" bpmnElement="DataOutputAssociation_076ja7q">
        <di:waypoint x="397" y="680" />
        <di:waypoint x="480" y="805" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0co6rff_di" bpmnElement="DataOutputAssociation_0co6rff">
        <di:waypoint x="499" y="680" />
        <di:waypoint x="496" y="805" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_1ibhs4m_di" bpmnElement="DataOutputAssociation_1ibhs4m">
        <di:waypoint x="603" y="680" />
        <di:waypoint x="517" y="805" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0skztoe_di" bpmnElement="Flow_0skztoe">
        <di:waypoint x="240" y="390" />
        <di:waypoint x="240" y="148" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_16vq708_di" bpmnElement="Flow_16vq708">
        <di:waypoint x="480" y="348" />
        <di:waypoint x="480" y="600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ecz3xw_di" bpmnElement="Flow_0ecz3xw">
        <di:waypoint x="650" y="402" />
        <di:waypoint x="650" y="300" />
        <di:waypoint x="820" y="300" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
